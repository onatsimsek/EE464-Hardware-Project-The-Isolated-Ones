Version 4
SHEET 1 1560 1344
WIRE -256 48 -720 48
WIRE -144 48 -256 48
WIRE -32 48 -144 48
WIRE 80 48 -32 48
WIRE 400 48 288 48
WIRE 592 48 464 48
WIRE 768 48 592 48
WIRE 288 64 288 48
WIRE 592 64 592 48
WIRE -256 80 -256 48
WIRE -144 80 -144 48
WIRE 768 80 768 48
WIRE -720 112 -720 48
WIRE -32 176 -32 128
WIRE 16 176 -32 176
WIRE 80 176 80 128
WIRE 80 176 16 176
WIRE 288 176 288 144
WIRE 592 176 592 128
WIRE 592 176 288 176
WIRE 768 176 768 160
WIRE 768 176 592 176
WIRE 1024 176 944 176
WIRE 1280 176 1024 176
WIRE -256 192 -256 160
WIRE -192 192 -256 192
WIRE -144 192 -144 144
WIRE -144 192 -192 192
WIRE -192 240 -192 192
WIRE 944 256 944 176
WIRE 1024 256 1024 176
WIRE -192 336 -192 304
WIRE 16 336 16 176
WIRE 16 336 -192 336
WIRE 1280 336 1280 176
WIRE 944 384 944 336
WIRE 944 384 912 384
WIRE 1024 384 1024 336
WIRE 1056 384 1024 384
WIRE 1152 384 1120 384
WIRE 1152 400 1152 384
WIRE -192 448 -192 336
WIRE 672 480 608 480
WIRE 720 480 672 480
WIRE 1024 480 1024 384
WIRE 1024 480 912 480
WIRE 1040 480 1024 480
WIRE 1184 480 1120 480
WIRE 1280 480 1280 416
WIRE 1280 480 1248 480
WIRE 672 512 672 480
WIRE -384 528 -416 528
WIRE -240 528 -384 528
WIRE 1024 528 1024 480
WIRE -384 560 -384 528
WIRE 1280 560 1280 480
WIRE 1280 560 1056 560
WIRE 1280 608 1280 560
WIRE 672 624 672 592
WIRE -384 656 -384 640
WIRE 1024 736 1024 592
WIRE 1280 736 1280 688
WIRE -416 768 -528 768
WIRE -192 768 -192 544
WIRE -192 768 -336 768
WIRE -192 800 -192 768
WIRE -528 816 -528 768
WIRE 944 880 816 880
WIRE 1232 880 1168 880
WIRE -528 928 -528 880
WIRE -192 928 -192 880
WIRE 944 944 912 944
WIRE 1200 944 1168 944
WIRE 1408 944 1200 944
WIRE 1504 944 1408 944
WIRE 944 1008 912 1008
WIRE 1200 1008 1168 1008
WIRE 1280 1008 1200 1008
WIRE 1280 1040 1280 1008
WIRE 1408 1040 1408 1024
WIRE 1408 1040 1280 1040
WIRE 1504 1040 1504 1008
WIRE 1504 1040 1408 1040
WIRE 880 1072 768 1072
WIRE 912 1072 880 1072
WIRE 944 1072 912 1072
WIRE 1200 1072 1168 1072
WIRE 1232 1072 1200 1072
WIRE 1264 1072 1232 1072
WIRE 768 1088 768 1072
WIRE 1264 1104 1264 1072
WIRE 1264 1200 1264 1168
WIRE 880 1296 880 1072
WIRE 1008 1296 880 1296
WIRE 1232 1296 1232 1072
WIRE 1232 1296 1088 1296
FLAG 912 1008 Ifb
FLAG 912 1072 osc
FLAG 1200 1008 Vfb
FLAG 1200 1072 ref
FLAG 1200 944 err
FLAG 912 944 out
FLAG -720 192 0
FLAG -720 112 Vin
FLAG -192 928 0
FLAG 736 880 0
FLAG -496 528 out
FLAG -528 928 0
FLAG 1264 1200 0
FLAG 1232 880 0
FLAG 768 1152 0
FLAG -528 768 Ifb
FLAG -384 656 0
FLAG 1280 736 0
FLAG 1024 736 0
FLAG 768 48 Vout
FLAG 1280 176 Vout
FLAG 1152 400 0
FLAG 672 624 0
FLAG 528 480 Vfb
FLAG 720 384 ref
SYMBOL UC3845 1056 976 M0
WINDOW 39 0 166 Center 2
SYMATTR SpiceLine toggle=1
SYMATTR InstName X1
SYMBOL voltage -720 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 20
SYMBOL ind -48 32 R0
SYMATTR InstName Lm
SYMATTR Value 19µ
SYMBOL ind2 64 32 R0
SYMATTR InstName Lprim
SYMATTR Value 100µ
SYMATTR Type ind
SYMBOL ind2 304 160 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Lsec
SYMATTR Value 100µ
SYMATTR Type ind
SYMBOL res -272 64 R0
SYMATTR InstName R1
SYMATTR Value 22k
SYMBOL cap -160 80 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL schottky -176 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value RBQ20BM100A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos -240 448 R0
SYMATTR InstName M1
SYMATTR Value IRFH5053
SYMBOL res -208 784 R0
SYMATTR InstName R2
SYMATTR Value 0.2
SYMBOL voltage 832 880 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 10
SYMBOL res -400 544 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -400 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 22
SYMBOL res -320 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap -544 816 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL cap 1248 1104 R0
SYMATTR InstName C3
SYMATTR Value 470n
SYMBOL res 1104 1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 5.6k
SYMBOL cap 752 1088 R0
SYMATTR InstName C4
SYMATTR Value 2.2n
SYMBOL schottky 400 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value RBR30NS60A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 576 64 R0
SYMATTR InstName C5
SYMATTR Value 1000µ
SYMBOL res 752 64 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL References\\LT1009 1024 560 R0
SYMATTR InstName U1
SYMBOL Optos\\PC817A 816 432 M0
SYMATTR InstName U2
SYMBOL res 1264 320 R0
SYMATTR InstName R8
SYMATTR Value 9.5k
SYMBOL res 1264 592 R0
SYMATTR InstName R9
SYMATTR Value 2.5k
SYMBOL res 1008 240 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 928 240 R0
SYMATTR InstName R11
SYMATTR Value 1.3k
SYMBOL res 1136 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 88.7k
SYMBOL cap 1248 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.01µ
SYMBOL zener 1120 368 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D3
SYMATTR Value BZX84C10L
SYMBOL res 656 496 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 624 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 5k
SYMBOL res 1392 928 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 1488 944 R0
SYMATTR InstName C7
SYMATTR Value 10n
TEXT -64 -288 Left 2 !.tran 0 5m 1u uic
TEXT -64 -320 Left 2 ;.options Trtol=9 Method=trapmod
TEXT 440 -400 Left 2 ;UC3845 test schematic, copied\nfrom analogspiceman's example,\nbut using a different model.\n \nVlad, groups.io
TEXT 152 -8 Left 2 !K Lprim Lsec 1
